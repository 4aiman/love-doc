<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.16.2" />
<link rel="shortcut icon" href="favicon1.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc1.php" title="LOVE (en)" />
<link title="Creative Commons" type="application/rdf+xml" href="" rel="meta" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="LOVE Atom feed" href="" />		<title>Tutorial:Fire Toward Mouse - LOVE</title>
		<link rel="stylesheet" href="shared1.css" media="screen" />
<link rel="stylesheet" href="commonprint1.css" media="print" />
<link rel="stylesheet" href="main1.css" media="screen" />
<link rel="stylesheet" href="" />
<link rel="stylesheet" href="" media="print" />
<link rel="stylesheet" href="" />
<link rel="stylesheet" href="" />
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes1.js_270"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>
var skin="love",
stylepath="/w/skins",
wgUrlProtocols="http\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/wiki/$1",
wgScriptPath="/w",
wgScriptExtension=".php",
wgScript="/w/index.php",
wgVariantArticlePath=false,
wgActionPaths={},
wgServer="https://www.love2d.org",
wgCanonicalNamespace="Tutorial",
wgCanonicalSpecialPageName=false,
wgNamespaceNumber=500,
wgPageName="Tutorial:Fire_Toward_Mouse",
wgTitle="Fire Toward Mouse",
wgAction="view",
wgArticleId=2166,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=false,
wgCurRevisionId=11751,
wgVersion="1.16.2",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "LOVE", "5": "LOVE talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk", "102": "Property", "103": "Property talk", "104": "Type", "105": "Type talk", "108": "Concept", "109": "Concept talk", "500": "Tutorial", "501": "Tutorial talk"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "love": 4, "love_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "property": 102, "property_talk": 103, "type": 104, "type_talk": 105, "concept": 108, "concept_talk": 109, "tutorial": 500, "tutorial_talk": 501, "image": 6, "image_talk": 7},
wgSiteName="LOVE",
wgCategories=["Tutorials"],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script>
		<script type="text/javascript" src="wikibits1.js_270"><!-- wikibits js --></script>
		<!-- Head Scripts -->
<script src="ajax1.js_270"></script>
		<link rel="alternate" type="application/rdf+xml" title="Tutorial:Fire Toward Mouse" href="" />
		<script type="text/javascript" src=""><!-- site js --></script>
  <!-- Google Analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-6143729-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script src="egg1.js"></script>
  <link href="https://plus.google.com/b/108553500970002863436/" rel="publisher" />
	</head>
<body class="mediawiki ltr ns-500 ns-subject page-Tutorial_Fire_Toward_Mouse skin-love">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
			
		<div id="p-cactions">
			<h5>Views</h5>
			<div>
				<ul>
		
					 <li id="ca-nstab-tutorial" class="selected"><a href="">Tutorial</a></li>
					 <li id="ca-talk" class="new"><a href="" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
					 <li id="ca-viewsource"><a href="" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
					 <li id="ca-history"><a href="" title="Past revisions of this page [h]" accesskey="h">History</a></li>				</ul>
			</div>
		</div>
	
		<h1 id="firstHeading" class="firstHeading">Tutorial:Fire Toward Mouse</h1>
		<div id="bodyContent">
			<div id="contentSub"></div>
									<!-- start content -->
			<p>This <a href="category_tutorials4.html" title="Category:Tutorials">tutorial</a> describes how to make a bullet fire toward the mouse when the user clicks. It is assumed that you know the basics of LOVE and Lua. All code takes place within main.lua.
</p>
<h2> <span class="mw-headline" id="Initialization"> Initialization </span></h2>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua"><span class="kw1">function</span> love.load<span class="br0">&#40;</span><span class="br0">&#41;</span><br />&nbsp; &nbsp; love.graphics.setBackgroundColor<span class="br0">&#40;</span><span class="nu0">54</span>, <span class="nu0">172</span>, <span class="nu0">248</span><span class="br0">&#41;</span><br />&nbsp; &nbsp; <br />&nbsp; &nbsp; bulletSpeed <span class="sy0">=</span> <span class="nu0">250</span><br />&nbsp; &nbsp; <br />&nbsp; &nbsp; bullets <span class="sy0">=</span> <span class="br0">&#123;</span><span class="br0">&#125;</span><br />&nbsp; &nbsp; player <span class="sy0">=</span> <span class="br0">&#123;</span>x<span class="sy0">=</span><span class="nu0">250</span>, y<span class="sy0">=</span><span class="nu0">250</span>, width<span class="sy0">=</span><span class="nu0">15</span>, height<span class="sy0">=</span><span class="nu0">15</span><span class="br0">&#125;</span><br /><span class="kw1">end</span></div></div>
<p>The first line just sets the background color as a nice blue. bulletSpeed is our variable that defines how fast a bullet will travel in pixels per second. The table bullets will hold a list of all our bullets and the table player holds all the info about our player.
</p><p>Each bullet will be its own table inside the bullets table. It will contain the properties x, y, dx, and dy. The dx and dy variables define how much the bullet should move in pixels per second on the x and y axis.
</p>
<h2> <span class="mw-headline" id="Drawing_Everything"> Drawing Everything </span></h2>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua"><span class="kw1">function</span> love.draw<span class="br0">&#40;</span><span class="br0">&#41;</span><br />&nbsp; &nbsp; love.graphics.setColor<span class="br0">&#40;</span><span class="nu0">255</span>, <span class="nu0">255</span>, <span class="nu0">255</span><span class="br0">&#41;</span><br />&nbsp; &nbsp; love.graphics.rectangle<span class="br0">&#40;</span><span class="st0">&quot;fill&quot;</span>, &nbsp;player.x, player.y, player.width, player.height<span class="br0">&#41;</span><br />&nbsp; &nbsp; <br />&nbsp; &nbsp; love.graphics.setColor<span class="br0">&#40;</span><span class="nu0">128</span>, <span class="nu0">128</span>, <span class="nu0">128</span><span class="br0">&#41;</span><br />&nbsp; &nbsp; <span class="kw1">for</span> i,v <span class="kw1">in</span> <span class="kw1">ipairs</span><span class="br0">&#40;</span>bullets<span class="br0">&#41;</span> <span class="kw1">do</span><br />&nbsp; &nbsp; &nbsp; &nbsp; love.graphics.circle<span class="br0">&#40;</span><span class="st0">&quot;fill&quot;</span>, v.x, v.y, <span class="nu0">3</span><span class="br0">&#41;</span><br />&nbsp; &nbsp; <span class="kw1">end</span><br /><span class="kw1">end</span></div></div>
<p>The first thing we do in the draw function is to set the color as white. After that, we draw a rectangle (which will represent the player).
</p><p>The next segment sets the color as gray for the bullet. The for statement will go through each value in our table of bullets. i is the index of the current bullet and v is its value. For each bullet we draw it as a circle on the screen
</p>
<h2> <span class="mw-headline" id="Determining_the_Bullet.27s_New_Position"> Determining the Bullet's New Position </span></h2>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua"><span class="kw1">function</span> love.update<span class="br0">&#40;</span>dt<span class="br0">&#41;</span><br />&nbsp; &nbsp; <span class="kw1">for</span> i,v <span class="kw1">in</span> <span class="kw1">ipairs</span><span class="br0">&#40;</span>bullets<span class="br0">&#41;</span> <span class="kw1">do</span><br />&nbsp; &nbsp; &nbsp; &nbsp; v.x <span class="sy0">=</span> v.x + <span class="br0">&#40;</span>v.dx <span class="sy0">*</span> dt<span class="br0">&#41;</span><br />&nbsp; &nbsp; &nbsp; &nbsp; v.y <span class="sy0">=</span> v.y + <span class="br0">&#40;</span>v.dy <span class="sy0">*</span> dt<span class="br0">&#41;</span><br />&nbsp; &nbsp; <span class="kw1">end</span><br /><span class="kw1">end</span></div></div>
<p>Once again we go through the list of bullets. For each one we update its x and y position. We do this by taking the current position and adding the change multiplied by the delta time.
</p>
<h2> <span class="mw-headline" id="Firing_the_Bullet"> Firing the Bullet </span></h2>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua"><span class="kw1">function</span> love.mousepressed<span class="br0">&#40;</span>x, y, button<span class="br0">&#41;</span><br />&nbsp; &nbsp; <span class="kw1">if</span> button <span class="sy0">==</span> <span class="st0">&quot;l&quot;</span> <span class="kw1">then</span><br />&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">local</span> startX <span class="sy0">=</span> player.x + player.width <span class="sy0">/</span> <span class="nu0">2</span><br />&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">local</span> startY <span class="sy0">=</span> player.y + player.height <span class="sy0">/</span> <span class="nu0">2</span><br />&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">local</span> mouseX <span class="sy0">=</span> x<br />&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">local</span> mouseY <span class="sy0">=</span> y<br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">local</span> angle <span class="sy0">=</span> <span class="kw1">math.atan2</span><span class="br0">&#40;</span><span class="br0">&#40;</span>mouseY - startY<span class="br0">&#41;</span>, <span class="br0">&#40;</span>mouseX - startX<span class="br0">&#41;</span><span class="br0">&#41;</span><br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">local</span> bulletDx <span class="sy0">=</span> bulletSpeed <span class="sy0">*</span> <span class="kw1">math.cos</span><span class="br0">&#40;</span>angle<span class="br0">&#41;</span><br />&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">local</span> bulletDy <span class="sy0">=</span> bulletSpeed <span class="sy0">*</span> <span class="kw1">math.sin</span><span class="br0">&#40;</span>angle<span class="br0">&#41;</span><br />&nbsp; &nbsp; &nbsp; &nbsp; <br />&nbsp; &nbsp; &nbsp; &nbsp; <span class="kw1">table.insert</span><span class="br0">&#40;</span>bullets, <span class="br0">&#123;</span>x <span class="sy0">=</span> startX, y <span class="sy0">=</span> startY, dx <span class="sy0">=</span> bulletDx, dy <span class="sy0">=</span> bulletDy<span class="br0">&#125;</span><span class="br0">&#41;</span><br />&nbsp; &nbsp; <span class="kw1">end</span><br /><span class="kw1">end</span></div></div>
<p>The if statement at the beginning of this makes it so that we only fire a bullet if the user left clicks. The <i>startX</i> and <i>startY</i> variables define the origin of the bullet. We want the bullet to start at the center of the player so we use <i>player.x + player.width / 2</i> to get that.
</p><p>To get angle we use <i>math.atan2</i> and pass it the difference in y and the difference in x. This function is very useful for finding the angle between any two objects.
</p><p>We find <i>bulletDx</i> and <i>bulletDy</i> by using some more trig. These varibales will define how fast the bullet will move in the x and y plane.
</p><p>The final line here inserts our new bullet into the list of bullets
</p>
<h2> <span class="mw-headline" id="Conclusion"> Conclusion </span></h2>
<p>When all put together you get the start of a top-down shooter game. Try out making the player movable and making the bullets disappear when they go off screen.
</p><p>--<a href="" class="new" title="User:Somethingmoreunique (page does not exist)">Somethingmoreunique</a> 03:22, 25 December 2011 (GMT)
</p>
<!-- 
NewPP limit report
Preprocessor node count: 57/1000000
Post-expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key love2d_wiki:pcache:idhash:2166-0!1!0!!en!2!edit=0 and timestamp 20150125223629 -->
<div class="printfooter">
Retrieved from "<a href="https://www.love2d.org/wiki/Tutorial:Fire_Toward_Mouse">https://www.love2d.org/wiki/Tutorial:Fire_Toward_Mouse</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="" title="Special:Categories">Category</a>: <span dir='ltr'><a href="category_tutorials4.html" title="Category:Tutorials">Tutorials</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">

	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(wiki1.png);" href="index9.html" title="Visit the main page"></a>
	</div>
<!--	<div class="portlet" id="p-docs">
		<h5>Documentation</h5>
		<div class="pBody">
			<ul>
				<li><a href="love272.html">love</a></li>
				<li><a href="love273.html">love.audio</a></li>
				<li><a href="love274.html">love.event</a></li>
				<li><a href="love275.html">love.filesystem</a></li>
				<li><a href="love276.html">love.graphics</a></li>
				<li><a href="love277.html">love.image</a></li>
				<li><a href="love278.html">love.joystick</a></li>
				<li><a href="love279.html">love.keyboard</a></li>
				<li><a href="love280.html">love.math</a></li>
				<li><a href="love281.html">love.mouse</a></li>
				<li><a href="love282.html">love.physics</a></li>
				<li><a href="love283.html">love.sound</a></li>
				<li><a href="love284.html">love.system</a></li>
				<li><a href="love285.html">love.timer</a></li>
				<li><a href="love286.html">love.window</a></li>
			</ul>
		</div>
	</div> -->
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-documentation'>
		<h5>documentation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-love"><a href="love272.html">love</a></li>
				<li id="n-love.audio"><a href="love273.html">love.audio</a></li>
				<li id="n-love.event"><a href="love274.html">love.event</a></li>
				<li id="n-love.filesystem"><a href="love275.html">love.filesystem</a></li>
				<li id="n-love.font"><a href="love287.html">love.font</a></li>
				<li id="n-love.graphics"><a href="love276.html">love.graphics</a></li>
				<li id="n-love.image"><a href="love277.html">love.image</a></li>
				<li id="n-love.joystick"><a href="love278.html">love.joystick</a></li>
				<li id="n-love.keyboard"><a href="love279.html">love.keyboard</a></li>
				<li id="n-love.math"><a href="love280.html">love.math</a></li>
				<li id="n-love.mouse"><a href="love281.html">love.mouse</a></li>
				<li id="n-love.physics"><a href="love282.html">love.physics</a></li>
				<li id="n-love.sound"><a href="love283.html">love.sound</a></li>
				<li id="n-love.system"><a href="love284.html">love.system</a></li>
				<li id="n-love.thread"><a href="love288.html">love.thread</a></li>
				<li id="n-love.timer"><a href="love285.html">love.timer</a></li>
				<li id="n-love.window"><a href="love286.html">love.window</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Home"><a href="love2d1.html">Home</a></li>
				<li id="n-Forums"><a href="forums.html">Forums</a></li>
				<li id="n-Issue-tracker"><a href="http://bitbucket.org/rude/love/issues">Issue tracker</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-wiki_navigation'>
		<h5>wiki navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="index9.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-recentchanges"><a href="" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="" title="Load a random page [x]" accesskey="x">Random page</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="w1.html" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search LOVE [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-smwbrowselink"><a href="" title="Special:Browse/Tutorial:Fire Toward Mouse">Browse properties</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="poweredby_mediawiki_88x311.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="gnu_fdl1.png" alt="GNU Free Documentation License 1.3" width="88" height="31" /></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 24 September 2013, at 22:21.</li>
					<li id="viewcount">This page has been accessed 7,278 times.</li>
					<li id="copyright">Content is available under <a href="http://www.gnu.org/copyleft/fdl.html" class="external ">GNU Free Documentation License 1.3</a>.</li>
					<li id="privacy"><a href="love_privacy_policy1.html" title="LOVE:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="love_about1.html" title="LOVE:About">About LOVE</a></li>
					<li id="disclaimer"><a href="love_general_disclaimer1.html" title="LOVE:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

<script>if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.309 secs. --></body></html>
