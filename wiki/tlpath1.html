<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="generator" content="MediaWiki 1.16.2" />
<link rel="shortcut icon" href="favicon1.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="opensearch_desc1.php" title="LOVE (en)" />
<link title="Creative Commons" type="application/rdf+xml" href="" rel="meta" />
<link rel="copyright" href="http://www.gnu.org/copyleft/fdl.html" />
<link rel="alternate" type="application/atom+xml" title="LOVE Atom feed" href="" />		<title>TLpath - LOVE</title>
		<link rel="stylesheet" href="shared1.css" media="screen" />
<link rel="stylesheet" href="commonprint1.css" media="print" />
<link rel="stylesheet" href="main1.css" media="screen" />
<link rel="stylesheet" href="" />
<link rel="stylesheet" href="" media="print" />
<link rel="stylesheet" href="" />
<link rel="stylesheet" href="" />
		<!--[if lt IE 7]><script type="text/javascript" src="iefixes1.js_270"></script>
		<meta http-equiv="imagetoolbar" content="no" /><![endif]-->

		<script>
var skin="love",
stylepath="/w/skins",
wgUrlProtocols="http\\:\\/\\/|https\\:\\/\\/|ftp\\:\\/\\/|irc\\:\\/\\/|gopher\\:\\/\\/|telnet\\:\\/\\/|nntp\\:\\/\\/|worldwind\\:\\/\\/|mailto\\:|news\\:|svn\\:\\/\\/",
wgArticlePath="/wiki/$1",
wgScriptPath="/w",
wgScriptExtension=".php",
wgScript="/w/index.php",
wgVariantArticlePath=false,
wgActionPaths={},
wgServer="https://www.love2d.org",
wgCanonicalNamespace="",
wgCanonicalSpecialPageName=false,
wgNamespaceNumber=0,
wgPageName="TLpath",
wgTitle="TLpath",
wgAction="view",
wgArticleId=1827,
wgIsArticle=true,
wgUserName=null,
wgUserGroups=null,
wgUserLanguage="en",
wgContentLanguage="en",
wgBreakFrames=false,
wgCurRevisionId=7351,
wgVersion="1.16.2",
wgEnableAPI=true,
wgEnableWriteAPI=true,
wgSeparatorTransformTable=["", ""],
wgDigitTransformTable=["", ""],
wgMainPageTitle="Main Page",
wgFormattedNamespaces={"-2": "Media", "-1": "Special", "0": "", "1": "Talk", "2": "User", "3": "User talk", "4": "LOVE", "5": "LOVE talk", "6": "File", "7": "File talk", "8": "MediaWiki", "9": "MediaWiki talk", "10": "Template", "11": "Template talk", "12": "Help", "13": "Help talk", "14": "Category", "15": "Category talk", "102": "Property", "103": "Property talk", "104": "Type", "105": "Type talk", "108": "Concept", "109": "Concept talk", "500": "Tutorial", "501": "Tutorial talk"},
wgNamespaceIds={"media": -2, "special": -1, "": 0, "talk": 1, "user": 2, "user_talk": 3, "love": 4, "love_talk": 5, "file": 6, "file_talk": 7, "mediawiki": 8, "mediawiki_talk": 9, "template": 10, "template_talk": 11, "help": 12, "help_talk": 13, "category": 14, "category_talk": 15, "property": 102, "property_talk": 103, "type": 104, "type_talk": 105, "concept": 108, "concept_talk": 109, "tutorial": 500, "tutorial_talk": 501, "image": 6, "image_talk": 7},
wgSiteName="LOVE",
wgCategories=["Templates", "Libraries"],
wgRestrictionEdit=[],
wgRestrictionMove=[];
</script>
		<script type="text/javascript" src="wikibits1.js_270"><!-- wikibits js --></script>
		<!-- Head Scripts -->
<script src="ajax1.js_270"></script>
		<link rel="alternate" type="application/rdf+xml" title="TLpath" href="" />
		<script type="text/javascript" src=""><!-- site js --></script>
  <!-- Google Analytics -->
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-6143729-1']);
    _gaq.push(['_trackPageview']);
    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>
  <script src="egg1.js"></script>
  <link href="https://plus.google.com/b/108553500970002863436/" rel="publisher" />
	</head>
<body class="mediawiki ltr ns-0 ns-subject page-TLpath skin-love">
	<div id="globalWrapper">
		<div id="column-content">
	<div id="content">
		<a name="top" id="top"></a>
			
		<div id="p-cactions">
			<h5>Views</h5>
			<div>
				<ul>
		
					 <li id="ca-nstab-main" class="selected"><a href="" title="View the content page [c]" accesskey="c">Page</a></li>
					 <li id="ca-talk" class="new"><a href="" title="Discussion about the content page [t]" accesskey="t">Discussion</a></li>
					 <li id="ca-viewsource"><a href="" title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></li>
					 <li id="ca-history"><a href="" title="Past revisions of this page [h]" accesskey="h">History</a></li>				</ul>
			</div>
		</div>
	
		<h1 id="firstHeading" class="firstHeading">TLpath</h1>
		<div id="bodyContent">
			<div id="contentSub"></div>
									<!-- start content -->
			<h2> <span class="mw-headline" id="About"> About </span></h2>
<p>TLpath adds pathfinding to Love! It uses an optimized implementation of the excellent <a href="https://secure.wikimedia.org/wikipedia/en/wiki/A*" class="external text" rel="nofollow">A* search algorithm</a> used in many commercial games. It comes with a demo which demonstrates its ability to find optimal paths in as little as 0.015 seconds in mazes comprised of over fifty nodes. TLpath uses threading, meaning it will only work in Love2D version 0.7.1 or higher, and requires <a href="tserial3.html" title="TSerial" class="mw-redirect">TSerial</a> (included).
</p><p>It's under the <a href="http://www.opensource.org/licenses/zlib-license.php" class="external text" rel="nofollow">ZLIB license</a>.
</p>
<h3> <span class="mw-headline" id="Download"> Download </span></h3>
<p><a href="http://dl.dropbox.com/u/3713769/web/Love/TLpath.zip" class="external text" rel="nofollow">Direct from Dropbox</a>
</p>
<h3> <span class="mw-headline" id="Contact"> Contact </span></h3>
<ul><li><a href="" class="external text" rel="nofollow">Forum thread</a>
</li><li>Taehl - SelfMadeSpirit@gmail.com
</li></ul>
<h2> <span class="mw-headline" id="Setup"> Setup </span></h2>
<p>Everything in the module is contained in the TLpath namespace, so don't worry about it messing with your global variables. It does its work in a separate thread, allowing the host game to continue running normally.
</p>
<ol><li> Put TLpath.lua and TSerial.lua in your game's folder
</li><li> At the top of main.lua, add the line <code>require"TLpath"</code>
</li><li> In love.update(), add the line <code>TLpath.update()</code>
</li></ol>
<h2> <span class="mw-headline" id="FAQ"> FAQ </span></h2>
<dl><dt>Q) What are nodes?
</dt><dd>A) A*, like nearly every pathfinding algorithm, uses nodes for increased speed. They are simply points which have connections to other nodes. In TLpath, they are expected to be a list of tables, for example, <code>{{x=1,y=1}, {x=5,y=3}, {x=2,y=8}, {x=9,y=6}}</code>. Technically speaking, nodes don't need x and y values, but may contain any relevant information. Nodes may also have a dests table, which contains the indexen of reachable nodes and the g-factor of that connection.
</dd></dl>
<dl><dt>Q) What's a g-factor? An h-factor? An f-factor?
</dt><dd>A) I would highly recommend you read about the A* algorithm <a href="https://secure.wikimedia.org/wikipedia/en/wiki/A*" class="external text" rel="nofollow">on the Wikipedia</a> for an explanation.
</dd></dl>
<dl><dt>Q) Can TLpath use different functions to calculate g- and h-factors?
</dt><dd>A) Yes, with TLpath.setGfunction() and TLpath.setHfunction()
</dd></dl>
<dl><dt>Q) My game has node relationships which are too complex to calculate in one function. Can I set them myself?
</dt><dd>A) Yes. If you TLpath.calcNodes() a list of nodes which already have dests tables, the tables will be left alone. Dests are required to be in form of <code>node.dests = {neighbor_index = g_factor_number}</code>.
</dd></dl>
<dl><dt>Q) What's the difference between dynamic and static nodes?
</dt><dd>A) Static nodes pre-calculate the node graph and g-factors, allowing all pathfinding calculations to be faster, but this calculation may take a moment to complete (your game won't freeze during this time). Dynamic nodes don't have this delay, but it will take longer to find paths. Static mode is generally preferable, unless your game frequently changes nodes and/or their connections.
</dd></dl>
<dl><dt>Q) How do I know what TLpath is doing? What happens if it has an error?
</dt><dd>A) TLpath updates the string TLpath.status with messages detailing what it's doing (including timing information if love.timer is available). If TLpath or its thread has an error, it will summon the standard Love2D error screen.
</dd></dl>
<p><br />
</p>
<h2> <span class="mw-headline" id="Functions"> Functions </span></h2>
<h4> <span class="mw-headline" id="TLpath.calcNodes">TLpath.calcNodes</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua">TLpath.calcNodes<span class="br0">&#40;</span>nodes, dynamic<span class="br0">&#41;</span></div></div>
<p>This function updates the node graph that TLpath uses. Use it whenever the nodes or their connections change. Non-dynamic nodes take a moment to calculate, but are generally preferable to dynamic ones.
</p>
<dl><dt><code><a href="table3.html" title="table">table</a> nodes</code></dt><dd> A list of nodes. For example: <code>{{x=1,y=1}, {x=5,y=3}, {x=2,y=8}, {x=9,y=6}}</code>
</dd><dt><code><a href="boolean4.html" title="boolean">boolean</a> dynamic</code></dt><dd> If true, node relationships won't be pre-calculated, allowing paths to start being calculated instantly and under changing conditions, but take longer than static nodes. Non-dynamic nodes are recommended.
</dd></dl>
<h4> <span class="mw-headline" id="TLpath.setGfunction">TLpath.setGfunction</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua">TLpath.setGfunction<span class="br0">&#40;</span>f<span class="br0">&#41;</span></div></div>
<p>This function is used to specify the g-function. The g-function is called to determine whether a node can reach another, and how "expensive" the resulting path will be. This will likely need to be changed to suit your game.
</p>
<dl><dt><code><a href="string4.html" title="string">string</a> f</code></dt><dd> A string which is Lua code for a function that will be called when calculating the node graph. The function is passed two nodes as parameters and is expected to return either nil (if a path can't extend from the first to the second) or a number (the g-factor of the path). By default, it is <code>[[local d = ((b.x-a.x)^2+(b.y-a.y)^2)^0.5 return d&lt;=100 and d or nil]]</code>, which means that nodes can only be traveled between if they're less than 100 pixels apart.
</dd></dl>
<p><br />
</p>
<h4> <span class="mw-headline" id="TLpath.setHfunction">TLpath.setHfunction</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua">TLpath.setHfunction<span class="br0">&#40;</span>f<span class="br0">&#41;</span></div></div>
<p>Much like TLpath.setGfunction(), except for calculating the heuristic factor of a node to the goal. This function must return a number which is less than or equal to (NOT greater than) the actual cost of a path from the node to the goal. The closer the h-factor is to the real cost of the path, the faster pathfinding calculations will be. The default h-function simply calculates the distance between the node and the goal, which is fast and should be fine for most games.
</p>
<dl><dt><code><a href="string4.html" title="string">string</a> f</code></dt><dd> Defaults to <code>[[return ((goal.x-a.x)^2+(goal.y-a.y)^2)^0.5</code>]].
</dd></dl>
<h4> <span class="mw-headline" id="TLpath.findPath">TLpath.findPath</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua">TLpath.findPath<span class="br0">&#40;</span>ent, goal<span class="br0">&#41;</span></div></div>
<p>This function tells TLpath to calculate a path from ent to goal, where ent is a table that includes a path list, and goal is a node index. Paths are calculated one at a time in the order they're requested, and may take a little bit of time to find, so there may be a small delay between requesting a path and receiving it. When a path is found, the path table of ent will be updated. If the goal isn't able to be reached from ent's current position, ent.path.unreachable will equal true and the ent's current path will be left unchanged.
</p>
<dl><dt><code><a href="table3.html" title="table">table</a> ent</code></dt><dd> A table which includes a paths table which lists at least one node index (i.e., where the ent is currently located).
</dd><dt><code><a href="number4.html" title="number">number</a> goal</code></dt><dd>The index of the goal node (that is, nodes[goal] = the desired node).
</dd></dl>
<h4> <span class="mw-headline" id="TLpath.cancelPathfinding">TLpath.cancelPathfinding</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua">TLpath.cancelPathfinding<span class="br0">&#40;</span><span class="br0">&#41;</span></div></div>
<p>Calling this will empty the pathfinding queue and cancel any currently-processing searches. TLpath.calcNodes automatically calls it to prevent bizarre behavior that emerges from changing the node graph while in the middle of finding a path.
</p>
<h4> <span class="mw-headline" id="TLpath.update">TLpath.update</span></h4>
<div dir="ltr" class="mw-geshi" style="text-align: left;"><div class="lua source-lua">TLpath.update<span class="br0">&#40;</span><span class="br0">&#41;</span></div></div>
<p>Call this in love.update() to handle TLpath's events (path request spooling, receiving data from thread, etc.).
</p>
<!-- 
NewPP limit report
Preprocessor node count: 180/1000000
Post-expand include size: 1324/2097152 bytes
Template argument size: 1001/2097152 bytes
Expensive parser function count: 0/100
-->

<!-- Saved in parser cache with key love2d_wiki:pcache:idhash:1827-0!1!0!!en!2!edit=0 and timestamp 20150125224604 -->
<div class="printfooter">
Retrieved from "<a href="https://www.love2d.org/wiki/TLpath">https://www.love2d.org/wiki/TLpath</a>"</div>
			<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks"><a href="" title="Special:Categories">Categories</a>: <span dir='ltr'><a href="category_templates1.html" title="Category:Templates">Templates</a></span> | <span dir='ltr'><a href="category_libraries2.html" title="Category:Libraries">Libraries</a></span></div></div>			<!-- end content -->
						<div class="visualClear"></div>
		</div>
	</div>
		</div>
		<div id="column-one">

	<div class="portlet" id="p-personal">
		<h5>Personal tools</h5>
		<div class="pBody">
			<ul>
				<li id="pt-login"><a href="" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li>
			</ul>
		</div>
	</div>
	<div class="portlet" id="p-logo">
		<a style="background-image: url(wiki1.png);" href="index9.html" title="Visit the main page"></a>
	</div>
<!--	<div class="portlet" id="p-docs">
		<h5>Documentation</h5>
		<div class="pBody">
			<ul>
				<li><a href="love272.html">love</a></li>
				<li><a href="love273.html">love.audio</a></li>
				<li><a href="love274.html">love.event</a></li>
				<li><a href="love275.html">love.filesystem</a></li>
				<li><a href="love276.html">love.graphics</a></li>
				<li><a href="love277.html">love.image</a></li>
				<li><a href="love278.html">love.joystick</a></li>
				<li><a href="love279.html">love.keyboard</a></li>
				<li><a href="love280.html">love.math</a></li>
				<li><a href="love281.html">love.mouse</a></li>
				<li><a href="love282.html">love.physics</a></li>
				<li><a href="love283.html">love.sound</a></li>
				<li><a href="love284.html">love.system</a></li>
				<li><a href="love285.html">love.timer</a></li>
				<li><a href="love286.html">love.window</a></li>
			</ul>
		</div>
	</div> -->
	<script type="text/javascript"> if (window.isMSIE55) fixalpha(); </script>
	<div class='generated-sidebar portlet' id='p-documentation'>
		<h5>documentation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-love"><a href="love272.html">love</a></li>
				<li id="n-love.audio"><a href="love273.html">love.audio</a></li>
				<li id="n-love.event"><a href="love274.html">love.event</a></li>
				<li id="n-love.filesystem"><a href="love275.html">love.filesystem</a></li>
				<li id="n-love.font"><a href="love287.html">love.font</a></li>
				<li id="n-love.graphics"><a href="love276.html">love.graphics</a></li>
				<li id="n-love.image"><a href="love277.html">love.image</a></li>
				<li id="n-love.joystick"><a href="love278.html">love.joystick</a></li>
				<li id="n-love.keyboard"><a href="love279.html">love.keyboard</a></li>
				<li id="n-love.math"><a href="love280.html">love.math</a></li>
				<li id="n-love.mouse"><a href="love281.html">love.mouse</a></li>
				<li id="n-love.physics"><a href="love282.html">love.physics</a></li>
				<li id="n-love.sound"><a href="love283.html">love.sound</a></li>
				<li id="n-love.system"><a href="love284.html">love.system</a></li>
				<li id="n-love.thread"><a href="love288.html">love.thread</a></li>
				<li id="n-love.timer"><a href="love285.html">love.timer</a></li>
				<li id="n-love.window"><a href="love286.html">love.window</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-navigation'>
		<h5>Navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-Home"><a href="love2d1.html">Home</a></li>
				<li id="n-Forums"><a href="forums.html">Forums</a></li>
				<li id="n-Issue-tracker"><a href="http://bitbucket.org/rude/love/issues">Issue tracker</a></li>
			</ul>
		</div>
	</div>
	<div class='generated-sidebar portlet' id='p-wiki_navigation'>
		<h5>wiki navigation</h5>
		<div class='pBody'>
			<ul>
				<li id="n-mainpage-description"><a href="index9.html" title="Visit the main page [z]" accesskey="z">Main page</a></li>
				<li id="n-recentchanges"><a href="" title="The list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
				<li id="n-randompage"><a href="" title="Load a random page [x]" accesskey="x">Random page</a></li>
			</ul>
		</div>
	</div>
	<div id="p-search" class="portlet">
		<h5><label for="searchInput">Search</label></h5>
		<div id="searchBody" class="pBody">
			<form action="w1.html" id="searchform"><div>
				<input type='hidden' name="title" value="Special:Search"/>
				<input id="searchInput" name="search" type="text" title="Search LOVE [f]" accesskey="f" value="" />
				<input type='submit' name="go" class="searchButton" id="searchGoButton"	value="Go" title="Go to a page with this exact name if exists" />&nbsp;
				<input type='submit' name="fulltext" class="searchButton" id="mw-searchButton" value="Search" title="Search the pages for this text" />
			</div></form>
		</div>
	</div>
	<div class="portlet" id="p-tb">
		<h5>Toolbox</h5>
		<div class="pBody">
			<ul>
				<li id="t-whatlinkshere"><a href="" title="List of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
				<li id="t-recentchangeslinked"><a href="" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
<li id="t-specialpages"><a href="" title="List of all special pages [q]" accesskey="q">Special pages</a></li>
				<li id="t-print"><a href="" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>				<li id="t-permalink"><a href="" title="Permanent link to this revision of the page">Permanent link</a></li><li id="t-smwbrowselink"><a href="" title="Special:Browse/TLpath">Browse properties</a></li>			</ul>
		</div>
	</div>
		</div><!-- end of the left (by default at least) column -->
			<div class="visualClear"></div>
			<div id="footer">
				<div id="f-poweredbyico"><a href="http://www.mediawiki.org/"><img src="poweredby_mediawiki_88x311.png" height="31" width="88" alt="Powered by MediaWiki" /></a></div>
				<div id="f-copyrightico"><a href="http://www.gnu.org/copyleft/fdl.html"><img src="gnu_fdl1.png" alt="GNU Free Documentation License 1.3" width="88" height="31" /></a></div>
			<ul id="f-list">
					<li id="lastmod"> This page was last modified on 16 October 2011, at 20:36.</li>
					<li id="viewcount">This page has been accessed 6,423 times.</li>
					<li id="copyright">Content is available under <a href="http://www.gnu.org/copyleft/fdl.html" class="external ">GNU Free Documentation License 1.3</a>.</li>
					<li id="privacy"><a href="love_privacy_policy1.html" title="LOVE:Privacy policy">Privacy policy</a></li>
					<li id="about"><a href="love_about1.html" title="LOVE:About">About LOVE</a></li>
					<li id="disclaimer"><a href="love_general_disclaimer1.html" title="LOVE:General disclaimer">Disclaimers</a></li>
			</ul>
		</div>
</div>

<script>if (window.runOnloadHook) runOnloadHook();</script>
<!-- Served in 0.255 secs. --></body></html>
